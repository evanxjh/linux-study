## Linux磁盘与文件系统管理（待完善）

#### EXT2文件系统

------

**super block**：记录文件系统的整体信息，包括inode/block的总量，使用量，剩余量等；

**inode**：记录文件的属性，一个文件占用一个inode，记录文件数据所在的block号码；

**block**：实际文件的内容，文件过大，占用多个block；

**挂载点**：挂载点将文件系统链接到目录树；

**VFS**：virtual filesystem switch，虚拟文件系统；Linux利用此内核功能读取文件系统。



#### 文件系统的简单操作

------

##### 1.磁盘与目录的容量

- **df**：列出文件系统的整体磁盘使用率
- **du**：评估文件系统的磁盘使用率

##### 2.连接文件

- **ln**：创建连接的命令

```
[root@xjh]# ln [-sf] 源文件 目标文件
```

hard link：实际连接

symbolic link：符号连接（快捷方式）



#### 磁盘的分区、格式化、检验与挂载

------

##### 1.磁盘分区

- **fdisk**

```
[root@xjh]# fdisk [-l] 设备名称
```

​		fdisk内部操作：待补充。

##### 2.磁盘格式化

- **mkfs**

```
[root@xjh]# mkfs [-t 文件系统格式] 设备文件名
```

##### 3.磁盘检验

- **fsck**：检验文件系统是否出错

```
[root@xjh]# fsck [-t 文件系统] [-ACay] 设备名称
```

- **badblocks**：检查硬盘或软盘扇区有没有坏轨的命令

```
[root@xjh]# badblocks [-svw] 设备名称
```

##### 4.磁盘挂载与卸载

- 单一文件系统不应被重复挂载在不同的挂载点中；
- 单一目录不应重复挂载多个文件系统；
- 作为挂载点的目录理论应为空目录。

```
[root@xjh]# mount [-t 文件系统] [-L Label名] [-o额外选项] [-n] 设备文件名 挂载点
```

umount为卸载

##### 5.磁盘参数修改（待完善）

- **mknod**
- **e2label**
- **hdparm**



#### 设置开机挂载

------

原则：

- 根目录/必须挂载；
- 其余挂载点必须是已新建的目录；
- 所有挂载点在同一时间内，只能挂载一次；
- 所有分区在同一时间内，只能挂载一次；
- 卸载前需要将工作目录移到挂载点之外。



#### 内存交换空间(swap)的构建

##### 1.使用物理分区构建

##### 2.使用文件构建

